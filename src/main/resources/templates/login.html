<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Login</title>
	<link rel="stylesheet" th:href="@{/css/styles.css}">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

	<!-- Preload background image to improve loading speed -->
	<link rel="preload" href="/images/back.jpg" as="image">

	<style>
		body {
			background-color: #f8f9fa;
			font-family: 'Arial', sans-serif;
			margin: 0;
			padding: 0;
			height: 100vh;
			/* Ensures the body covers the entire screen */
			overflow: hidden;
			display: flex;
			justify-content: center;
			/* Horizontally center */
			align-items: center;
			/* Vertically center */
		}

		.background-image {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-image: url('/images/back.jpg');
			background-size: cover;
			background-position: center;
			background-attachment: fixed;
			z-index: -1;
			opacity: 0;
			transition: opacity 1s ease-in-out;
		}

		.login-container {
			width: 350px;
			opacity: 0;
			transition: opacity 1s ease-in-out;
		}

		.card {
			padding: 30px;
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
		}

		.card h3 {
			font-size: 1.5rem;
			margin-bottom: 20px;
		}

		/* Loader */
		.loader {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			font-size: 2rem;
			color: #333;
		}
	</style>

</head>

<body>
	<!-- Preload the background image -->
	<div class="background-image"></div>

	<!-- Loader until image loads -->
	<div class="loader">Loading...</div>

	<!-- Login Form -->
	<div class="login-container">
		<div class="card shadow p-4">
			<h3 class="text-center">Login</h3>
			<form th:action="@{/login}" method="post">
				<div th:if="${param.error}" class="alert alert-danger">Invalid username or password</div>
				<div th:if="${param.logout}" class="alert alert-success">You have logged out</div>

				<div class="mb-3">
					<label class="form-label">Username</label>
					<input type="text" name="username" class="form-control" required
						placeholder="Enter your E-mail Address">
				</div>

				<div class="mb-3">
					<label class="form-label">Password</label>
					<input type="password" name="password" class="form-control" required
						placeholder="Enter your Password">
				</div>

				<button type="submit" class="btn btn-primary w-100">Login</button>
			</form>

			<p class="text-center mt-3">
				Don't have an account? <a th:href="@{/register}">Register</a>
			</p>
		</div>
	</div>
	
	<div class="text-center mt-3">
		<a th:href="@{/forgot}" class="text-danger fw-bold">Forgot Password?</a>
	</div>

	<!-- JavaScript to hide loader and reveal content once image is loaded -->
	<script>
		window.onload = function () {
			// Hide loader and show content after the image has loaded
			document.querySelector('.loader').style.display = 'none';
			document.querySelector('.background-image').style.opacity = 1;
			document.querySelector('.login-container').style.opacity = 1;
		};
	</script>

</body>

</html>